set spoolfile = "+gmail/Inbox"
set from      = "alex@alexpearce.me"
# Can also recieve mail for these addresses
alternates      ^boba899@gmail.com$
set sendmail  = "/usr/local/bin/msmtp -a gmail"
set postponed = "+gmail/Drafts"
# Don't record outgoing emails; Gmail does this automatically
unset record
set trash     = "+gmail/Trash"

macro index ,c "<change-folder>+cern/Inbox<enter>" "change accounts"

# Clear any previously defined mailboxes
unmailboxes *
# Use all folder names that begin with gmail/<capital letter>, prefixing them
# with a plus sign and formatting them on a single line as that's the format
# `mailboxes` expects
# This command returning folders also in the above list is OK, mutt ignores
# them
mailboxes \
  "+gmail/Inbox" \
  "+gmail/Drafts" \
  "+gmail/Sent" \
  "+gmail/Spam" \
  "+gmail/Trash" \
  `tree ~/.mail -d -I "cur|new|tmp|certs|Inbox" -a -f -i | sed -n -E -e "s|^/Users/apearce/.mail/?||" -e "/^(cern|personal|gmail)(\/[a-z].+)?$/d" -e "/^(gmail)/{p;}" | sed -E -e 's/(.*)/+"\1"/' | tr '\n' ' '`

# vi:syntax=muttrc
